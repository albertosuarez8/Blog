@page
@model TechBlog.Pages.CreatePostModel
@{
    <h2>Create new post</h2>

    <form class="form post-form">
        <div class="form-group update-post mt-3">
            <span class="form-label">Title</span>
            <textarea class="form-control" id="title" aria-label="With textarea"></textarea>
        </div>
        <div class="form-group mt-3">
            <span class="form-label">Description</span>
            <textarea class="form-control" id="description" aria-label="With textarea"></textarea>
        </div>
        <div class="form-group mt-3">
            <span class="form-label">Username</span>
            <textarea class="form-control" id="username" aria-label="With textarea"></textarea>
        </div>
        <div class="form-group d-flex justify-content-center mt-3">
            <button id="submit" class="btn btn-primary w-100">Create</button>
        </div>
    </form>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    $(document).ready(function() {
        $('#submit').click(function() {
                console.log("help");
                $.ajax({
                    url: 'https://localhost:7262/api/posts/help',  // Replace with your API endpoint URL
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        id: 50,
                        title: $('#title').val(),
                        description: $('#description').val(),
                        date: Date.now(),
                        username: $('#username').val(),
                    }),
                    success: function (response) {
                        // Redirect to another Razor Page
                        window.location.href = '/Dashboard';  // Replace with the URL of your target Razor Page
                    },
                    error: function (xhr, status, error) {
                        // Handle the error response
                        console.error('Error deleting and redirecting:', error);
                    }
                });
        })
    })
            // Make an AJAX request to call the endpoint
            
    </script>
}
